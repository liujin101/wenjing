<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>文井の博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="时光荏苒须当惜，风雨阴晴勤值历。">
<meta property="og:type" content="website">
<meta property="og:title" content="文井の博客">
<meta property="og:url" content="https://github.com/liujin101/wenjing.git/index.html">
<meta property="og:site_name" content="文井の博客">
<meta property="og:description" content="时光荏苒须当惜，风雨阴晴勤值历。">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="文井の博客">
<meta name="twitter:description" content="时光荏苒须当惜，风雨阴晴勤值历。">
  
    <link rel="alternate" href="/atom.xml" title="文井の博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/wenjing/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/wenjing/" id="logo">文井の博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/wenjing/" id="subtitle">时光荏苒须当惜，风雨阴晴勤值历。</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/wenjing/">Home</a>
        
          <a class="main-nav-link" href="/wenjing/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/liujin101/wenjing.git"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-20170923_04" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/wenjing/2017/09/23/20170923_04/" class="article-date">
  <time datetime="2017-09-23T12:42:06.896Z" itemprop="datePublished">2017-09-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="比较escape、encodeURI、encodeURIComponent"><a href="#比较escape、encodeURI、encodeURIComponent" class="headerlink" title="比较escape、encodeURI、encodeURIComponent"></a>比较escape、encodeURI、encodeURIComponent</h1><p>2017/9/23 9:32:59 </p>
<hr>
<p>估计很多前端工程师并不清楚escape,encodeURI, encodeURIComponent的区别，也不知道什么时候该用哪个方法，以及这些方法为什么要被用到，下面我主要来阐述一下这三个方法的区别以及用法。<br>escape 方法：</p>
<p>escape() 方法生成新的由十六进制转义序列替换的字符串。escape 函数是全局对象的属性. 特色字符如: @*_+-./ 被排除在外。字符的16进制格式值,当该值小于等于0xFF时,用一个2位转移序列: %xx 表示。大于的话则使用4位序列:%uxxxx 表示。<br>该特性已经从 Web 标准中删除，虽然一些浏览器目前仍然支持它，但也许会在未来的某个时间停止支持，请尽量不要使用该特性。<br>看看例子吧：<br>JavaScript代码:</p>
<p>escape(‘abc123’);// “abc123”<br>escape(‘äöü’);// “%E4%F6%FC”<br>escape(‘ć’);// “%u0107”<br>// special characters<br>escape(‘@<em>_+-./‘);// “@</em>_+-./“<br>escape(‘~!@#$%^&amp;<em>(){}[]=:/,;?+\’”\‘)<br>//%7E%21@%23%24%25%5E%26</em>%28%29%7B%7D%5B%5D%3D%3A/%2C%3B%3F+%27%22%5C<br>encode 方法：</p>
<p>encodeURI() 是对统一资源标识符（URI）进行编码的方法。它使用1到4个转义序列来表示每个字符的UTF-8编码（只有由两个代理字符区组成的字符才用四个转义字符编码）。<br>假定一个URI是完整的URI，那么无需对那些保留的并且在URI中有特殊意思的字符进行编码。encodeURI 会替换所有的字符，但不包括以下字符，即使它们具有适当的UTF-8转义序列：<br>类型    包含<br>保留字符    ;,/?:@&amp;=+$<br>非转义的字符    字母 数字 -_.!~*’()<br>数字符号    #<br>请注意，encodeURI 自身无法产生能适用于HTTP GET 或 POST 请求的URI，例如对于 XMLHTTPRequests, 因为 “&amp;”, “+”, 和 “=” 不会被编码，然而在 GET 和 POST 请求中它们是特殊字符。然而encodeURIComponent这个方法会对这些字符编码。<br>通过替换每一个字符实例成一个或是两三个编码过的UTF-8字符，来对URI编码。<br>例子：<br>JavaScript代码:</p>
<p>encodeURI(‘~!@#$%^&amp;<em>(){}[]=:/,;?+\’”\‘)<br>//~!@#$%25%5E&amp;</em>()%7B%7D%5B%5D=:/,;?+’%22%5C<br>encodeURIComponent 方法：</p>
<p>encodeURIComponent()是对统一资源标识符（URI）的组成部分进行编码的方法。它使用一到四个转义序列来表示字符串中的每个字符的UTF-8编码（只有由两个Unicode代理区字符组成的字符才用四个转义字符编码）。encodeURIComponent 转义除了字母、数字、(、)、.、!、~、*、’、-和_之外的所有字符。<br>这个解释和encode一样，实际上encodeURI 和 encodeURIComponent 差别就是一个是对更多的字符编码，而一个只是对URI部分编码。<br>同样字符串的例子：<br>JavaScript代码:</p>
<p>escape(‘~!@#$%^&amp;<em>(){}[]=:/,;?+\’”\‘)<br>//%7E%21@%23%24%25%5E%26</em>%28%29%7B%7D%5B%5D%3D%3A/%2C%3B%3F+%27%22%5C<br>encodeURI(‘~!@#$%^&amp;<em>(){}[]=:/,;?+\’”\‘);<br>//~!@#$%25%5E&amp;</em>()%7B%7D%5B%5D=:/,;?+’%22%5C<br>encodeURIComponent(‘~!@#$%^&amp;<em>(){}[]=:/,;?+\’”\‘);<br>//~!%40%23%24%25%5E%26</em>()%7B%7D%5B%5D%3D%3A%2F%2C%3B%3F%2B’%22%5C<br>总结：</p>
<p>escape 方法已经在 ECMAScript v3 标准中被删除了, 所以不推荐使用.<br>对应的解码函数为 unescape, decodeURI 和 decodeURIComponent.<br>JavaScript代码:</p>
<p>var url =’<a href="http://www.css88.com/?s=前端" target="_blank" rel="external">http://www.css88.com/?s=前端</a>;<br>var results =[‘URI: ‘+ url];<br>// escape<br>results.push(‘escape: ‘+ escape(url));<br>// encodeURI<br>results.push(‘encodeURI: ‘+ encodeURI(url));<br>// encodeURIComponent<br>results.push(‘encodeURIComponent: ‘+ encodeURIComponent(url));<br>/<em><br>results结果：<br>“URI: <a href="http://www.css88.com/?s=前端" target="_blank" rel="external">http://www.css88.com/?s=前端</a>“<br>“escape: http%3A//www.css88.com/%3Fs%3D%u524D%u7AEF”<br>“encodeURI: <a href="http://www.css88.com/?s=%E5%89%8D%E7%AB%AF" target="_blank" rel="external">http://www.css88.com/?s=%E5%89%8D%E7%AB%AF</a>“<br>“encodeURIComponent: http%3A%2F%2Fwww.css88.com%2F%3Fs%3D%E5%89%8D%E7%AB%AF” 
</em>/<br>具体使用<br>escape:<br>escape 不会编码的字符：@<em>/+<br>escape方法不回编码+字符，+字符在服务器端会被解释成空格，这点和通过表达提交一样。<br>由于escape有这样的缺点，和它不能很好的正确处理非ASCII字符的事实，我们应该尽量避免（对URI）使用escape，最好的方式是encodeURIComponent。<br>encodeURI:<br>encodeURI 不会编码的字符很多，有：~!@#$&amp;</em>()=:/,;?+’<br>在对一段URI编码来说，encodeURI方法比escape方法更专业一些。当你需要编码一整个URI的时候，你可以使用此方法，因为URI中的合法字符都不会被编码转换。需要注意到是字符’也是URI中的合法字符，所以也不会被编码转换。<br>encodeURIComponent:<br>encodeURIComponent不会编码的字符: ~!*()’<br>encodeURIComponent方法在编码单个URIComponent（指请求参数）应当是最常用的。需要注意到是字符’也是URI中的合法字符，所以也不会被编码转换。</p>
<hr>
<p>转载自：<a href="http://www.css88.com/archives/6954，原作者：天涯孤雁。" target="_blank" rel="external">http://www.css88.com/archives/6954，原作者：天涯孤雁。</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/liujin101/wenjing.git/2017/09/23/20170923_04/" data-id="cj7xb1scj0002ygqhcllgrtyy" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-20170923_05" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/wenjing/2017/09/23/20170923_05/" class="article-date">
  <time datetime="2017-09-23T12:42:06.896Z" itemprop="datePublished">2017-09-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="关于-parseInt-的一道有意思的面试题"><a href="#关于-parseInt-的一道有意思的面试题" class="headerlink" title="关于 parseInt 的一道有意思的面试题"></a>关于 parseInt 的一道有意思的面试题</h1><p>2017/9/23 9:43:47 </p>
<hr>
<p>看完标题，入坑过的同学脑海里很快会浮现出这道经典面试题，没碰到过的同学不妨跟着楼主先来复习一遍 parseInt 的用法（主要参考 MDN）。<br>parseInt 是 JavaScript 中的一个全局函数（顶级函数），它会将给定的字符串以指定基数（radix/base）解析成为整数。<br>它的语法非常简单：<br>复制代码parseInt(string, radix)<br>第一个参数 string 是要被解析的值，如果参数不是一个字符串，则将其转换为字符串，字符串开头的空白符将会被忽略。而第二个参数 radix 是一个 2 到 36 之间的整数值，用于指定转换中采用的基数，如果不传入，默认是 10，即按照十进制转换，这里要注意一点，如果第二个参数传入 0，和传入 10 以及不传入第二个参数等效。函数返回一个整数值，如果解析过程中发生错误，将返回 NaN。<br>返回 NaN 的主要有以下几种情况：<br>被解析参数的第一个字符无法被转化成数值类型<br>被解析参数数值太大，不是 radix 进制下的合法数字<br>radix 不在 [2, 36] 范围内（注意其实 0 也是可以的）<br>复制代码console.log(parseInt(‘hello’,2));// NaNconsole.log(parseInt(‘3’,2));// NaN, 3 不是合法的二进制数字console.log(parseInt(‘3’,100));// NaN<br>其实实际开发中我很少用 parseInt，而是用 + 和 ~~ 代替，因为它实在是太长了，但是很显然 parseInt 的使用范围更广。<br>简单回顾了 parseInt 的用法，我们来看这道题：<br>复制代码let ans = [“1”,”2”,”3”].map(parseInt);console.log(ans);<br>和大多数人一样，我的第一反应也是返回 [1, 2, 3]，这个时候我们有必要回顾下 Array.prototype.map，该方法的参数是一个函数，而该函数又可以接受三个参数，分别表示数组元素的值，数组元素的在数组中的索引，以及对于数组的引用。一般来说我们直接在 map 方法中传入匿名函数，但是如果这个函数是在外面定义的，传入的是方法名呢？<br>复制代码let fn = (…a) =&gt;{console.log(a);};let ans = [“1”,”2”,”3”].map(fn);// [ ‘1’, 0, [ ‘1’, ‘2’, ‘3’ ] ]// [ ‘2’, 1, [ ‘1’, ‘2’, ‘3’ ] ]// [ ‘3’, 2, [ ‘1’, ‘2’, ‘3’ ] ]<br>我们可以看到，如果没为该函数指定参数，那么这三个参数都会被传入！<br>我们再回到这道题，parseInt 方法是可以传入 1-2 个参数的，所以 map 传入的三个参数，其实是都会被传给 parseInt 方法的，只是 parseInt 会使用前两个参数而已。<br>复制代码console.log(parseInt(‘12’,10,’ignore’));// 12<br>所以整个过程差不多是这样的：<br>复制代码let fn = (item, index, array) =&gt;{returnparseInt(item, index, array);};let ans = [“1”,”2”,”3”].map(fn);console.log(ans);// [ 1, NaN, NaN ]<br>其实就是计算如下：<br>复制代码console.log(parseInt(“1”,0));// 1console.log(parseInt(“2”,1));// NaNconsole.log(parseInt(“3”,2));// NaN<br>看懂了吧不妨再试试下面这道：<br>复制代码let ans =”1 2 3”.replace(/\d/g,parseInt);console.log(ans);<br>原理是一样的，当 replace 的第二个参数是函数的时候，该函数的第一个参数是匹配模式的字符串，接下来的参数是与模式中的子表达式匹配的字符串，可以有 0 个或者多个这样的参数。接下来的参数是一个整数，声明了匹配在 StringObject 中出现的位置，最后一个参数是 StringObject 本身。<br>还是一样，打印出来看看呗：<br>复制代码let fn = (…a) =&gt;{console.log(a);};let ans =”1 2 3”.replace(/\d/g, fn);// [ ‘1’, 0, ‘1 2 3’ ]// [ ‘2’, 2, ‘1 2 3’ ]// [ ‘3’, 4, ‘1 2 3’ ]<br>接下去就简单了，就是计算下面的表达式了：<br>复制代码console.log(parseInt(“1”,0,’1 2 3’));// 1console.log(parseInt(“2”,2,’1 2 3’));// NaNconsole.log(parseInt(“3”,4,’1 2 3’));// 3<br>最后再加一道题：<br>复制代码console.log(parseInt(Infinity,19))<br>前面说了，第一个参数 string 是要被解析的值，如果参数不是一个字符串，则将其转换为字符串，所以 Infinity 被转换成 “Infinity”，而 19 进制数中，最大的字符就是 i，代表 18，所以解析的时候遇到 n 就停了，所以输出 18</p>
<hr>
<p>转载自：<a href="http://www.cnblogs.com/zichi/p/6489703.html，原作者：韩子迟。" target="_blank" rel="external">http://www.cnblogs.com/zichi/p/6489703.html，原作者：韩子迟。</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/liujin101/wenjing.git/2017/09/23/20170923_05/" data-id="cj7xb1scz0004ygqhnm02ueyh" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-20170923_01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/wenjing/2017/09/23/20170923_01/" class="article-date">
  <time datetime="2017-09-23T12:42:06.880Z" itemprop="datePublished">2017-09-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="我的第一篇博客"><a href="#我的第一篇博客" class="headerlink" title="我的第一篇博客"></a>我的第一篇博客</h1><p>2017/9/23 8:49:44 </p>
<hr>
<p>这是我的个人博客的第一篇文章，博客使用hexo+github搭建，图片资源存放在七牛云空间。后续整理出来的文章大部分是网上资源，少部分是个人学习、工作总结和感悟。网上资源都会备注原作者及来源，如有侵权请联系我进行删除。</p>
<hr>
<p>时光荏苒须当惜，风雨阴晴勤值历。但行好事，莫问前程，与君共勉，O(∩_∩)O~</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/liujin101/wenjing.git/2017/09/23/20170923_01/" data-id="cj7xb1sbo0000ygqhbj9n8h3s" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-20170923_02" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/wenjing/2017/09/23/20170923_02/" class="article-date">
  <time datetime="2017-09-23T12:42:06.880Z" itemprop="datePublished">2017-09-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="IOS-APP中网页嵌入iframe-input输入框无法输入（可获取焦点但无法输入内容）bug"><a href="#IOS-APP中网页嵌入iframe-input输入框无法输入（可获取焦点但无法输入内容）bug" class="headerlink" title="IOS APP中网页嵌入iframe input输入框无法输入（可获取焦点但无法输入内容）bug"></a>IOS APP中网页嵌入iframe input输入框无法输入（可获取焦点但无法输入内容）bug</h1><p>2017/9/23 9:03:19 </p>
<hr>
<p>先上代码：<br><br>//点击页面除输入框以外区域使输入框失去焦点：<br>$(document).on(“”+ eventName +””,function(){<br>    switch ($(“.checkTitleChecked”).parent().attr(“point”)){<br>        case ‘jingti’:<br>            $(“#jingti input”).blur();<br>            break;<br>        case ‘chengyi’:<br>            $(“#chengyi input”).blur();<br>            break;<br>    }<br>});<br>//点击基本信息p标签使子元素input获得焦点事件：<br>$(document).on(“”+ eventName +””,”.checkDiv .baseIfo p”,function(e){<br>    var ev = e || window.event;<br>    if(ev.stopPropagation){<br>            ev.stopPropagation();<br>     }<br>    else if(window.event){<br>            window.event.cancelBubble = true;//兼容IE<br>    }<br>    $(this).children(“input”).focus();<br>});<br>分析：以上两段代码所在的网页作为iframe嵌入另一网页，在网页端是正常运行的，不论何种设备。但在ios app中时出现输入框可获取焦点但实际未获得输入内容的情况。ios app本身对iframe嵌套的网页支持性有不足，因此初步解决方案是取消这两段代码。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/liujin101/wenjing.git/2017/09/23/20170923_02/" data-id="cj7xb1sc40001ygqhsnpqolnn" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-20170923_03" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/wenjing/2017/09/23/20170923_03/" class="article-date">
  <time datetime="2017-09-23T12:42:06.880Z" itemprop="datePublished">2017-09-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="图片预览功能–兼容IE"><a href="#图片预览功能–兼容IE" class="headerlink" title="图片预览功能–兼容IE"></a>图片预览功能–兼容IE</h1><p>2017/9/23 9:26:01 </p>
<hr>
<h2 id="功能要求以及遇到的几个问题"><a href="#功能要求以及遇到的几个问题" class="headerlink" title="功能要求以及遇到的几个问题"></a>功能要求以及遇到的几个问题</h2><p>1、用户上传图片前预览图片，确定是否选取正确，此时可以对不满意的图片进行删除。<br>2、要求兼容IE低版本浏览器，因此必须使用滤镜。<br>3、由于后台在设计时是没有考虑兼容性的，因此使用的是HTML5中的formDate对象来作为数据传输的传媒，IE9及以下版本无法传输数据至后台。<br>4、IE浏览器基于安全性的考虑禁止使用JavaScript对input元素进行模拟点击事件的操作，因此在利用BootScript框架中的美化文件上传样式时，在IE浏览器中上传的文件格式错误。<br>5、最开始接手项目时没有与后台进行沟通交流，选取的是百度开发团队维护的一个图片预览上传插件（Webuploader）进行开发，预览功能可以很好的实现，但是由于Webuploader采取的是将图片转换为Base64编码格式的数据后再在页面上显示出来，后台也是采用PHP来接收数据，因此完全是不能用，只好丢掉重来。</p>
<h2 id="最终采用的代码以及注释"><a href="#最终采用的代码以及注释" class="headerlink" title="最终采用的代码以及注释"></a>最终采用的代码以及注释</h2><pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;&lt;/title&gt;
        &lt;style type=&quot;text/css&quot;&gt;
   #add-img{
            background: #0094FF;
            color: white;
            border: none;
            outline: none;
            width: 100px;
            line-height: 24px;
            position: absolute;
            bottom: 5px;
            left: 320px;
            border-radius: 10px;
        }
        .click-check-img{
            border-radius: 10px;
            background: #0094FF;
            color: white;
            border: none;
            outline: none;
            width: 100px;
            line-height: 24px;
        }
        #add-img:hover{
            cursor: pointer;
            background: #0084ff;
        }
        .preview{

            width: 120px;
            height:180px;
            display: inline-block;
            position: relative;
            margin: 0 20px;

        }        
        #uploadfiledemoform{
            border: 1px solid #CCCCCC;
            border-radius: 5px;
            width: 740px;
            padding-left: 60px;
            padding-bottom: 25px;
            margin: auto;
            margin-bottom: 10px;
            position: relative;
            margin-top: 10px;
            padding-top: 10px;
        }
        .preview .del{
            display: none;
            width: 20px;
            height: 20px;
            border: none;
            outline: none;
            position: absolute;
            right: 0;
            top: 0;
            background: url(icons.png) top right;
        }
        .del:hover{
            cursor: pointer;
        }
        .file{                        

            opacity: 0;
            position: absolute;
            font-size: 16px;
            width: 110px;
            /*使用滤镜解决ie浏览器不支持file按钮的opacity*/
            filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0);            
        }
        .file:hover{
            cursor: pointer;
        }
        #uploadfiledemoform img{
            margin-bottom: 5px;
        }
&lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form enctype=&quot;multipart/form-data&quot; id=&quot;uploadfiledemoform&quot; method=&quot;post&quot;&gt;
    &lt;div class=&quot;preview&quot;&gt;
        &lt;input type=&quot;button&quot; class=&quot;del&quot; /&gt;
        &lt;div id=&quot;imgdiv&quot;&gt;&lt;img id=&quot;imgShow&quot; width=&quot;100&quot; height=&quot;100&quot; src=&quot;&quot; /&gt;&lt;/div&gt;
        &lt;input type=&quot;file&quot; class=&quot;file&quot; id=&quot;up_img&quot; name=&quot;file&quot; /&gt;
        &lt;input type=&quot;button&quot; class=&quot;btn btn-primary click-check-img&quot;&quot; value=&quot;点击选择图片&quot; /&gt;

    &lt;/div&gt;

    &lt;input id=&apos;add-img&apos; class=&quot;btn btn-primary&quot; type=&quot;button&quot; value=&quot;继续添加&quot; /&gt;

&lt;/form&gt;
    &lt;/body&gt;
    &lt;script src=&quot;jquery-1.9.1.min.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

    &lt;script&gt;

 $(function(){
//     *work:图片预览方法
var uploadPreview = function(setting) {

    var _self = this;

    _self.IsNull = function(value) {
        if (typeof (value) == &quot;function&quot;) { return false; }
        if (value == undefined || value == null || value == &quot;&quot; || value.length == 0) {
            return true;
        }
        return false;
    }

    _self.DefautlSetting = {
        UpBtn: &quot;&quot;,
        DivShow: &quot;&quot;,
        ImgShow: &quot;&quot;,
        Width: 100,
        Height: 100,
        ImgType: [&quot;gif&quot;, &quot;jpeg&quot;, &quot;jpg&quot;, &quot;bmp&quot;, &quot;png&quot;],
        ErrMsg: &quot;选择文件错误,图片类型必须是(gif,jpeg,jpg,bmp,png)中的一种&quot;,
        callback: function() { }
    };

    _self.Setting = {
        UpBtn: _self.IsNull(setting.UpBtn) ? _self.DefautlSetting.UpBtn : setting.UpBtn,
        DivShow: _self.IsNull(setting.DivShow) ? _self.DefautlSetting.DivShow : setting.DivShow,
        ImgShow: _self.IsNull(setting.ImgShow) ? _self.DefautlSetting.ImgShow : setting.ImgShow,
        Width: _self.IsNull(setting.Width) ? _self.DefautlSetting.Width : setting.Width,
        Height: _self.IsNull(setting.Height) ? _self.DefautlSetting.Height : setting.Height,
        ImgType: _self.IsNull(setting.ImgType) ? _self.DefautlSetting.ImgType : setting.ImgType,
        ErrMsg: _self.IsNull(setting.ErrMsg) ? _self.DefautlSetting.ErrMsg : setting.ErrMsg,
        callback: _self.IsNull(setting.callback) ? _self.DefautlSetting.callback : setting.callback
    };

    _self.getObjectURL = function(file) {
        var url = null;
        if (window.createObjectURL != undefined) {
            url = window.createObjectURL(file);
        } else if (window.URL != undefined) {
            url = window.URL.createObjectURL(file);
        } else if (window.webkitURL != undefined) {
            url = window.webkitURL.createObjectURL(file);
        }
        return url;
    }

    _self.Bind = function() {
        document.getElementById(_self.Setting.UpBtn).onchange = function() {
            $(this).prev().hover(function(){
                $(this).prev().show();
            });

            if (this.value) {
                if (!RegExp(&quot;\.(&quot; + _self.Setting.ImgType.join(&quot;|&quot;) + &quot;)$&quot;, &quot;i&quot;).test(this.value.toLowerCase())) {
                    alert(_self.Setting.ErrMsg);
                    this.value = &quot;&quot;;
                    return false;
                }
                if (navigator.userAgent.indexOf(&quot;MSIE&quot;) &gt; -1) {
                    try {
                        document.getElementById(_self.Setting.ImgShow).src = _self.getObjectURL(this.files[0]);
                    } catch (e) {
                        var div = document.getElementById(_self.Setting.DivShow);
                        this.select();
                        top.parent.document.body.focus();
                        var src = document.selection.createRange().text;
                        document.selection.empty();
                        document.getElementById(_self.Setting.ImgShow).style.display = &quot;none&quot;;
                        div.style.filter = &quot;progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)&quot;;
                        div.style.width = _self.Setting.Width + &quot;px&quot;;
                        div.style.height = _self.Setting.Height + &quot;px&quot;;
                        div.filters.item(&quot;DXImageTransform.Microsoft.AlphaImageLoader&quot;).src = src;
                    }
                } else {
                    document.getElementById(_self.Setting.ImgShow).src = _self.getObjectURL(this.files[0]);
                }
                _self.Setting.callback();
            }
        }
    }

    _self.Bind();
}
     //图片预览方法结束    
     //用户进入页面后实例化：
     new uploadPreview({ UpBtn: &quot;up_img&quot;, DivShow: &quot;imgdiv&quot;, ImgShow: &quot;imgShow&quot; });
     //用户选取第一个文件上传按钮后自动生成下一个按钮：
     var $preview = $(&quot;.preview&quot;).last().children(&quot;div&quot;).children(&quot;img&quot;);
     var imgDivId = 0;
     var imgShowId = 0;
     var fileId = 0;
     var count = 1;

     $(document).on(&quot;click&quot;,&quot;.preview .del&quot;,function(){                             
            $(this).parent().remove();
            count--;
            //当用户删除掉所有选择的图片时再生成一个空白的选择按钮并为该按钮添加图片预览功能：
            if(count == 0){
                $(&apos;&lt;div class=&quot;preview&quot;&gt;&lt;input type=&quot;button&quot; class=&quot;del&quot; /&gt;&lt;div id=&quot;imgdiv&apos;+ imgDivId +&apos;&quot;&gt;&lt;img id=&quot;imgShow&apos;+ imgShowId +&apos;&quot; width=&quot;100&quot; height=&quot;100&quot; /&gt;&lt;/div&gt;&lt;input  class=&quot;file&quot;  name=&quot;file&quot; type=&quot;file&quot; id=&quot;up_img&apos;+ fileId +&apos;&quot; /&gt;&lt;input type=&quot;button&quot; class=&quot;btn btn-primary click-check-img&quot; onclick=&quot;$(this).prev().click();&quot; value=&quot;点击选择图片&quot; /&gt;&lt;/div&gt;&apos;)
         .appendTo($(&quot;#uploadfiledemoform&quot;));
         //为该按钮调用uploadPreview方法：
         new uploadPreview({ UpBtn: &quot;up_img&quot;+ imgDivId +&quot;&quot;, DivShow: &quot;imgdiv&quot;+ imgShowId +&quot;&quot;, ImgShow: &quot;imgShow&quot;+ fileId +&quot;&quot; });
         imgDivId++;
         imgShowId++;
         fileId++;
         count++;

            }
     });

     $(&quot;#add-img&quot;).click(function(){
         $preview = $(&quot;.preview&quot;).last().children(&quot;div&quot;).children(&quot;img&quot;);        
         if(count&lt;=7){                  
         $(&apos;&lt;div class=&quot;preview&quot;&gt;&lt;input type=&quot;button&quot; class=&quot;del&quot; /&gt;&lt;div id=&quot;imgdiv&apos;+ imgDivId +&apos;&quot;&gt;&lt;img id=&quot;imgShow&apos;+ imgShowId +&apos;&quot; width=&quot;100&quot; height=&quot;100&quot; /&gt;&lt;/div&gt;&lt;input  class=&quot;file&quot;  name=&quot;file&quot; type=&quot;file&quot; id=&quot;up_img&apos;+ fileId +&apos;&quot; /&gt;&lt;input type=&quot;button&quot; class=&quot;btn btn-primary click-check-img&quot; onclick=&quot;$(this).prev().click();&quot; value=&quot;点击选择图片&quot; /&gt;&lt;/div&gt;&apos;)
         .appendTo($preview.parent().parent().parent());
         //为该按钮调用uploadPreview方法：
         new uploadPreview({ UpBtn: &quot;up_img&quot;+ imgDivId +&quot;&quot;, DivShow: &quot;imgdiv&quot;+ imgShowId +&quot;&quot;, ImgShow: &quot;imgShow&quot;+ fileId +&quot;&quot; });
         imgDivId++;
         imgShowId++;
         fileId++;
         count++;
         }
         else 
         if(count&gt;7){
             alert(&quot;最多只能选择八张图片&quot;);            
         }
     });
     //页面方法结束
 })
&lt;/script&gt;
&lt;/html&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/liujin101/wenjing.git/2017/09/23/20170923_03/" data-id="cj7xb1scz0003ygqhmkc9hhvw" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-20170923_08" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/wenjing/2017/09/23/20170923_08/" class="article-date">
  <time datetime="2017-09-23T12:42:06.864Z" itemprop="datePublished">2017-09-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="什么是-EXIF"><a href="#什么是-EXIF" class="headerlink" title="什么是 EXIF"></a>什么是 EXIF</h1><p>2017/9/23 10:25:12 </p>
<hr>
<h2 id="什么是-EXIF-1"><a href="#什么是-EXIF-1" class="headerlink" title="什么是 EXIF"></a>什么是 EXIF</h2><p>Exif是英文Exchangeable Image File(可交换图像文件)的缩写，最初由日本电子工业发展协会(JEIDA –Japan Electronic Industry Development Association) 制订，目前的最新版本是2.21 版。国际标准化组织(ISO)正在制订的相机文件设计标准（DCF – Design role for Camera File system）可能以Exif2.1为基础。</p>
<p>Exif 文件实际是JPEG文件的一种，遵从JPEG标准，只是在文件头信息中增加了有关拍摄信息的内容和索引图。所以你可以使用任何支持JPEG格式的图像工具软件观看或修改Exif文件，但，打开时可能看不到Exif信息，一旦修改，Exif信息可能丢失。</p>
<p>简单来说，EXIF 信息就是由数码相机在拍摄过程中采集一系列的信息，然后把信息放置在我们熟知的 JPEG/TIFF 文件的头部，也就是说 EXIF 信息是镶嵌在 JPEG/TIFF 图像文件格式内的一组拍摄参数，主要包括摄影时的光圈、快门、ISO、日期时间等各种与当时摄影条件相关的讯息，相机品牌型号，色彩编码，拍摄时录制的声音以及全球定位系统（GPS）等信息。简单的说，它就好像是傻瓜相机的日期打印功能一样，只不过 EXIF 信息所记录的资讯更为详尽和完备。<br>Exif21.pdf (580k) JEIDA 制定的EXIF 2.1 官方标准。(1998.6.12)<br>Exif22.pdf (750k) JEIDA 制定的EXIF 2.2 官方标准。(2002.4)<br>EXIF 文件格式说明 一个日本人写的 EXIF 英文参考文档，内容很详细。</p>
<h3 id="Exif的标识"><a href="#Exif的标识" class="headerlink" title="Exif的标识"></a>Exif的标识</h3><p>所有的JPEG文件以字符串“0xFFD8”开头，并以字符串“0xFFD9”结束。文件头中有一系列“0xFF??”格式的字符串，称为“标识”，用来标记JPEG文件的信息段。“0xFFD8”表示图像信息开始，“0xFFD9”表示图像信息结束，这两个标识后面没有信息，而其它标识紧跟一些信息字符。</p>
<p>0xFFE0 – 0xFFEF之间的标识符称为“应用标记”，没有被常规JPEG文件利用，Exif正是利用这些信息串记录拍摄信息如快门速度、光圈值等，甚至可以包括全球定位信息。按照Exif2.1标准对这些标识符的定义，数码相机可以把各种拍摄信息记入数码图像中，应用软件可以读取这些数据，再按照Exif2.1标准，检索出它们的具体含义,一般而言包括以下一些信息：</p>
<p>Image Description 图像描述、来源. 指生成图像的工具<br>Artist作者 有些相机可以输入使用者的名字<br>Make 生产者 指产品生产厂家<br>Model 型号 指设备型号<br>Orientation方向 有的相机支持，有的不支持<br>XResolution/YResolution X/Y方向分辨率 本栏目已有专门条目解释此问题。<br>ResolutionUnit分辨率单位 一般为PPI<br>Software软件 显示固件Firmware版本<br>DateTime日期和时间<br>YCbCrPositioning 色相定位<br>ExifOffsetExif信息位置，定义Exif在信息在文件中的写入，有些软件不显示。<br>ExposureTime 曝光时间 即快门速度<br>FNumber光圈系数<br>ExposureProgram曝光程序 指程序式自动曝光的设置，各相机不同,可能是Sutter Priority（快门优先）、Aperture Priority（快门优先）等等。<br>ISO speed ratings感光度<br>ExifVersionExif版本<br>DateTimeOriginal创建时间<br>DateTimeDigitized数字化时间<br>ComponentsConfiguration图像构造（多指色彩组合方案）<br>CompressedBitsPerPixel(BPP)压缩时每像素色彩位 指压缩程度<br>ExposureBiasValue曝光补偿。<br>MaxApertureValue最大光圈<br>MeteringMode测光方式， 平均式测光、中央重点测光、点测光等。<br>Lightsource光源 指白平衡设置<br>Flash是否使用闪光灯。<br>FocalLength焦距，一般显示镜头物理焦距，有些软件可以定义一个系数，从而显示相当于35mm相机的焦距 MakerNote(User Comment)作者标记、说明、记录<br>FlashPixVersionFlashPix版本 （个别机型支持）<br>ColorSpace色域、色彩空间<br>ExifImageWidth(Pixel X Dimension)图像宽度 指横向像素数<br>ExifImageLength(Pixel Y Dimension)图像高度 指纵向像素数<br>Interoperability IFD通用性扩展项定义指针 和TIFF文件相关，具体含义不详<br>FileSource源文件 Compression压缩比。</p>
<h2 id="什么是-GPS"><a href="#什么是-GPS" class="headerlink" title="什么是 GPS"></a>什么是 GPS</h2><p>GPS，Global Positioning System(全球卫星定位系统)，是美国从20世纪70年代开始耗巨资研制，于1994年全面建成，具有在海、陆、空进行全方位实时三维导航与定位能力的新一代卫星导航与定位系统。<br>越来越多的数码相机厂商也开始在他们的新产品里提供了GPS功能的支持，（如Kodak DCS760等）可将照片拍摄瞬间所处经度、纬度、海拔的三维空间定位数据记载在图片里，只要图片里保留了完整的 GPS 信息，IExif 就能准确地再现给查看者。</p>
<h2 id="什么是-IPTC-NAA"><a href="#什么是-IPTC-NAA" class="headerlink" title="什么是 IPTC/NAA"></a>什么是 IPTC/NAA</h2><p>IPTC-NAA: 由美国报业协会（NAA） 和国际印刷电信委员会（IPTC）制定的信息标准，以识别传输的文本和图像。该标准包括关于题注、关键字、类别、资料来源和原稿的条目等。当前许多新闻图片机器都包含了IPTC/NAA记录。</p>
<hr>
<p>转载自：<a href="http://www.opanda.com/cn/iexif/exif.htm，原作者：http://www.opanda.com/cn/iexif/exif.htm。" target="_blank" rel="external">http://www.opanda.com/cn/iexif/exif.htm，原作者：http://www.opanda.com/cn/iexif/exif.htm。</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/liujin101/wenjing.git/2017/09/23/20170923_08/" data-id="cj7xb1sdf0005ygqhgauo5tzc" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-20170923_07" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/wenjing/2017/09/23/20170923_07/" class="article-date">
  <time datetime="2017-09-23T12:42:06.864Z" itemprop="datePublished">2017-09-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="HTTP2-常见问题集锦"><a href="#HTTP2-常见问题集锦" class="headerlink" title="HTTP2 常见问题集锦"></a>HTTP2 常见问题集锦</h1><p>2017/9/23 10:19:19 </p>
<hr>
<h2 id="为什么修订-HTTP-？"><a href="#为什么修订-HTTP-？" class="headerlink" title="为什么修订 HTTP ？"></a>为什么修订 HTTP ？</h2><p>HTTP/1.1 已经很好地服务 Web 超过 15 个年头，但它的缺点开始显现出来。<br>载入一个 Web 页面相比之前会占用更多的资源（详情可见HTTP压缩页大小统计），高效的载入这些资源很难，因为 HTTP 实际上对每个 TCP 连接，只允许一个优先的 HTTP 请求。<br>在过去，对于并发请求，浏览器使用多个 TCP 连接。然而这也是有局限的；如果使用了过多的连接，则会有相反的效果（TCP 的流控机制导致发送窗口乘性递减，从而产生的拥塞事件影响了性能和网络的表现），同时从根本上来讲这也是不公平的（因为浏览器承载的资源需求大于它们享有的网络资源）。<br>此外，大量的请求意味着“线上”有很多重复的数据。<br>HTTP/1.1 在这两个问题上消耗了大量的资源。如果发起过多的请求，则会影响性能。<br>这些问题导致了像雪碧图、数据内联、域共享和文件合并有了最佳的实践场合。这些技巧正是底层协议问题的表现，并且在使用中也导致了它们自身的一系列问题。</p>
<h2 id="谁创造了-HTTP-2-？"><a href="#谁创造了-HTTP-2-？" class="headerlink" title="谁创造了 HTTP/2 ？"></a>谁创造了 HTTP/2 ？</h2><p>HTTP/2 由 IETF 的 HTTP 工作组开发，他们也在维护着 HTTP 协议。他们由一群 HTTP 实现者、用户、网络运营商和 HTTP 专家组成。<br>注意虽然我们的邮件列表托管在 W3C 的站点上，并工作并不是他们所承担。然而，Tim Berners-Lee 和 W3C TAG 与 WG 的进度保持了一致。<br>很多人对相关工作作出了贡献，不过大部分活跃的参与者都来自于像 Firefox、Chrome、Twitter、Microsoft 的 HTTP stack、Curl 和 Akamai 这样“大”项目的工程师，以及若干 Python、Ruby 和 NodeJS 的 HTTP 实现者。<br>要了解更多 IETF 的参与者，请看 IETF 之道。你也可以在 Github 的贡献者图表中了解到哪些人正在对规范做着贡献，以及在我们的实现列表中了解哪些人正在参与实现。</p>
<h2 id="与-SPDY-有什么关联？"><a href="#与-SPDY-有什么关联？" class="headerlink" title="与 SPDY 有什么关联？"></a>与 SPDY 有什么关联？</h2><p>HTTP/2 第一次出现并被讨论的时候，SPDY 正得到厂商 (像 Mozilla 和 nginx)的青睐，并被看成是基于 HTTP/1.x 的重大改进。<br>经过提议和投票流程之后，SPDY/2 被选为 HTTP/2 的基础。直从那时起，根据工作组的讨论和厂商的反馈，它已经有了很多变化。<br>在整个过程中，SPDY 的核心开发成员都参与了 HTTP/2 的发展，其中包括了 Mike Belshe 和 Roberto Peon。<br>在 2015 年 2 月份，Google 发表了放弃 SPDY 转而支持 HTTP/2 的声明。</p>
<h2 id="是-HTTP-2-0-还是-HTTP-2-？"><a href="#是-HTTP-2-0-还是-HTTP-2-？" class="headerlink" title="是 HTTP/2.0 还是 HTTP/2 ？"></a>是 HTTP/2.0 还是 HTTP/2 ？</h2><p>工作组决定去掉小版本 (“.0”) ，因为它在 HTTP/1.x 中造成了很多困惑。<br>也就是说， HTTP 的版本仅仅代表它的线上兼容性，而不表示它的特性集合或者“市场吸引力”。</p>
<h2 id="与-HTTP-1-x-有什么关键区别？"><a href="#与-HTTP-1-x-有什么关键区别？" class="headerlink" title="与 HTTP/1.x 有什么关键区别？"></a>与 HTTP/1.x 有什么关键区别？</h2><p>宏观上来讲，HTTP/2：<br>基于二进制而不是文本的<br>完全多路复用，代替原来的排序和阻塞机制<br>在一条连接中并行处理多个请求<br>压缩头部减少开销<br>允许服务器主动推送响应到客户端的缓存中</p>
<h2 id="为什么-HTTP-2-是二进制的？"><a href="#为什么-HTTP-2-是二进制的？" class="headerlink" title="为什么 HTTP/2 是二进制的？"></a>为什么 HTTP/2 是二进制的？</h2><p>比起像 HTTP/1.x 这样的文本协议，二进制协议解析起来更高效、“线上”更紧凑，更重要的是错误更少，因为它对如空白字符、大小写、行尾、空行等的处理都更有效。<br>例如，HTTP/1.1 定义了四个不同的方法来解析一条消息；在HTTP/2中，仅需一个代码路径即可。<br>HTTP/2 在 telnet 中将不可用，但是我们有一些工具提供支持，比如 Wireshark 插件。</p>
<h2 id="为什么-HTTP-2-是多路复用的？"><a href="#为什么-HTTP-2-是多路复用的？" class="headerlink" title="为什么 HTTP/2 是多路复用的？"></a>为什么 HTTP/2 是多路复用的？</h2><p>HTTP/1.x 有个问题叫队头阻塞，即一个连接同时只能有效地承载一个请求。<br>HTTP/1.1 试过用流水线来解决这个问题，但是效果并不理想(数据量较大或者速度较慢的响应，仍然会阻碍排在后面的响应)。此外，由于网络中介和服务器都不能很好的支持流水线技术，导致部署起来困难重重。<br>客户端被迫使用一些启发式的算法（基本靠猜）来决定哪些连接来承载哪些请求；由于通常一个页面加载资源的连接需求，往往超过了可用连接资源的 10 倍，这对性能产生极大的负面影响，后果经常是引起了风暴式的阻塞。<br>而多路复用则能很好的解决这些问题，因为它能同时处理多个消息的请求和响应；甚至可以在传输过程中将一个消息跟另外一个糅合在一起。<br>所以客户端只需要一个连接就能加载一个完整的页面。</p>
<h2 id="为什么只用一个-TCP-连接？"><a href="#为什么只用一个-TCP-连接？" class="headerlink" title="为什么只用一个 TCP 连接？"></a>为什么只用一个 TCP 连接？</h2><p>在 HTTP/1 下，浏览器为每个域分配了 4 到 8 个连接。因为许多站点使用多个域，因此一般一个页面会加载 30 多个连接。<br>一个应用同时打开这么多连接，已经远远超出了当初设计 TCP 时的预期；由于每一个连接都会在响应中开启一个数据洪流，中介网络的缓存存在溢出的风险，结果导致网络堵塞和数据重传。<br>此外，使用这么多连接还会强占许多网络资源。这些资源都是从脾气好的其它应用那“偷”来的 ( VoIP 就是个例子)。</p>
<h2 id="服务器推送的收益是什么？"><a href="#服务器推送的收益是什么？" class="headerlink" title="服务器推送的收益是什么？"></a>服务器推送的收益是什么？</h2><p>当浏览器请求一个网页时，服务器将会发回 HTML，在服务器开始发送 JavaScript、图片和 CSS 前，服务器需要等待浏览器解析 HTML 并发起所有内嵌资源的请求。<br>服务器推送服务通过“推送”那些它认为客户端将会需要的内容到客户端的缓存中，以此来避免往返的延迟。</p>
<h2 id="为什么需要压缩头部？"><a href="#为什么需要压缩头部？" class="headerlink" title="为什么需要压缩头部？"></a>为什么需要压缩头部？</h2><p>来自 Mozilla 的 Patrick McManus 通过计算头部对页面负载的平均影响度，清晰地说明了这个问题。<br>假设一个页面中有大约 80 个资源（对于今天的 Web 来说这个数字是比较保守的），并且每个头部有 1400 比特（同样并不罕见，多谢 Cookies、Referer 等），这就需要至少七八个往返传递头部。这还没有计算响应时间——那只是客户端获取它们所花的时间而已。<br>这是由于 TCP 的慢启动机制造成的，在新的连接上发送数据包的速度取决于有多少个数据包已经被确认——在最初的几轮中这有效限制了可以发送的数据包的数量。<br>作为对比，即使是轻微的头部压缩也可以是让那些请求只需一个来回就能搞定——有时候甚至一个数据包就可以了。<br>这种开销是可以被节省下来的，特别是当你考虑移动端应用的时候，即使是条件良好的情况下，一般也会看到几百毫秒的往返延迟。</p>
<h2 id="为什么使用-HPACK-？"><a href="#为什么使用-HPACK-？" class="headerlink" title="为什么使用 HPACK ？"></a>为什么使用 HPACK ？</h2><p>SPDY/2 曾提出在每个方向上都使用一个单独的 GZIP 上下文用于消息头的压缩，这实现起来很容易，也很高效。<br>从那时候开始，一种针对流压缩（如 GZIP）中加密算法的重要攻击方式被发现；CRIME。<br>通过 CRIME，攻击者有能力在加密流中注入数据以“探测”文本内容并恢复它。由于是在 Web 环境中，JavaScript 使之成为了可能，并且，已经有在受 TLS 保护的 HTTP 资源中利用 CRIME 恢复 cookies 和鉴权令牌的先例。<br>因此，我们不能使用 GZIP 压缩。也没有找到其它安全和合适的压缩算法，我们就创造了一种新的、针对 HTTP 消息头的粗略压缩方案；由于 HTTP 的消息头在消息之间并不经常变化，因此我们可以得到合理的压缩效率，并且更加地安全。</p>
<h2 id="HTTP-2-可以让-cookies（或其它头部）更好吗？"><a href="#HTTP-2-可以让-cookies（或其它头部）更好吗？" class="headerlink" title="HTTP/2 可以让 cookies（或其它头部）更好吗？"></a>HTTP/2 可以让 cookies（或其它头部）更好吗？</h2><p>HTTP/2 是对现有运行的协议的修订，包括如何升级新的 HTTP 头部、方法，而不会影响 HTTP 的语义。<br>因为 HTTP 被使用得如此广泛，如果我们在这个版本中引入了一个新的状态机制（例如之前讨论过的例子）或者改变了核心方法（幸好没有人提起这件事），那么就意味着新的协议和现在的协议发生了不兼容。<br>特别要强调，我们需要的是无缝地从 HTTP/1 过渡到 HTTP/2。如果我们现在开始“清算”头部（大多数人会认同，HTTP消息头现在简直是一团糟），那么我们也就不得不面对现代 Web 中的互操作性问题。<br>那样做只会在采用新协议的过程中制造麻烦。<br>总而言之，工作组会对所有的 HTTP 负责，而不仅仅只是 HTTP/2。 因此，只要同现有的网络兼容，我们才可以独立于版本地运行新的机制。</p>
<h2 id="非浏览器形式的-HTTP-用户该怎么办？"><a href="#非浏览器形式的-HTTP-用户该怎么办？" class="headerlink" title="非浏览器形式的 HTTP 用户该怎么办？"></a>非浏览器形式的 HTTP 用户该怎么办？</h2><p>非浏览器用户如果已经在使用 HTTP，那么也可以使用 HTTP/2。<br>之前收到过 HTTP/2 针对 HTTP “API” 有更好的性能特点的报告，因为 API 在设计时不需要考虑像请求开销这样的问题。<br>曾提到过，我们认为 HTTP/2 改进的重点是典型的浏览器环境，因为这是该协议的主要应用场景。<br>我们的章程里面是这样说的:<br>最终的标准期望能针对已经部署的普通 HTTP 达到这些目标；特别地，包括 Web 浏览器（桌面和移动端）、非浏览器（“HTTP API”），网络服务（不同尺度的）、中介（代理、企业防火墙，反向代理以及内容分发网络）。同样，当前和未来针对 HTTP/1.x （头部、方法、状态码、缓存指令）的语义化扩展也应该在新的协议中被支持。注意这并不涵盖 HTTP 的非标准用法（比如连接状态的超时、客户端关联以及拦截代理）；它们都不会被最终启用。</p>
<h2 id="HTTP-2-需要加密吗？"><a href="#HTTP-2-需要加密吗？" class="headerlink" title="HTTP/2 需要加密吗？"></a>HTTP/2 需要加密吗？</h2><p>不需要。经过广泛的讨论，工作组对于新的协议在加密（如 TLS）的使用上没有达成共识。<br>但是，在实现上厂商都已表明他们只会在加密连接下才会支持 HTTP/2，目前，没有浏览器支持不加密的 HTTP/2。<br>HTTP/2 该如何提升安全性？</p>
<p>HTTP/2 定义了一个所需 TLS 的基本描述信息；包括版本、密码套件和用到的扩展。<br>细节参见相关规范。<br>此外也有额外的相关讨论，比如对 HTTP:// URL(所谓的“机会主义加密”)使用TLS；参见 issue #315。</p>
<h2 id="现在可以使用-HTTP-2-了吗？"><a href="#现在可以使用-HTTP-2-了吗？" class="headerlink" title="现在可以使用 HTTP/2 了吗？"></a>现在可以使用 HTTP/2 了吗？</h2><p>在浏览器上，Edge、Safari、Firefox 和 Chrome 的近期版本都支持 HTTP/2。其它使用 Blink 内核的浏览器（Opera 和 Yandex）也都支持 HTTP/2。<br>此外还有几个可用的服务器（包括 Akamai 的 beta 版本，Google 和 Twitter 的主站），以及一些你可以部署和测试的开源实现。<br>详情请看实现列表。</p>
<h2 id="HTTP-2-会替换-HTTP-1-x-吗？"><a href="#HTTP-2-会替换-HTTP-1-x-吗？" class="headerlink" title="HTTP/2 会替换 HTTP/1.x 吗？"></a>HTTP/2 会替换 HTTP/1.x 吗？</h2><p>工作组的目标是 HTTP/1.x 的典型应用能够使用 HTTP/2 并且看到收益。之前提到，我们不能强制大家迁移，因为人们部署代理和服务器的方式让 HTTP/1.x 在未来还会使用一段时间。</p>
<h2 id="未来会有-HTTP-3-吗？"><a href="#未来会有-HTTP-3-吗？" class="headerlink" title="未来会有 HTTP/3 吗？"></a>未来会有 HTTP/3 吗？</h2><p>如果 HTTP/2 的协商机制工作良好，未来会更容易升级到新的 HTTP 版本。<br>实现问题</p>
<h2 id="为什么规则会围绕头部帧的数据接续？"><a href="#为什么规则会围绕头部帧的数据接续？" class="headerlink" title="为什么规则会围绕头部帧的数据接续？"></a>为什么规则会围绕头部帧的数据接续？</h2><p>数据接续的存在是由于一个值（如 Set-Cookie)可以超过 16kb - 1，这意味着它不可能全部装进一个帧里面。所以就决定以最不容易出错的方式让所有的消息头数据以一个接一个帧的方式传递，这样就使得对消息头的解码和缓冲区的管理更加的容易。</p>
<h2 id="HPACK状态的最小和最大尺寸是多少？"><a href="#HPACK状态的最小和最大尺寸是多少？" class="headerlink" title="HPACK状态的最小和最大尺寸是多少？"></a>HPACK状态的最小和最大尺寸是多少？</h2><p>接收一方总是会控制 HPACK 中内存的使用量，并且最小能设置到 0，最大则要看 SETTING 帧中能表示的最大整型数是多少，目前是 2^32 - 1。</p>
<h2 id="我怎样才能避免保持-HPACK-状态？"><a href="#我怎样才能避免保持-HPACK-状态？" class="headerlink" title="我怎样才能避免保持 HPACK 状态？"></a>我怎样才能避免保持 HPACK 状态？</h2><p>发送一个 SETTINGS 帧将状态尺寸 (SETTINGS_HEADER_TABLE_SIZE) 设置到 0，然后 RST 所有的流，直到一个带有 ACT 设置位的 SETTINGS 帧发送了过来。</p>
<h2 id="为什么会有一个单独的压缩-流控制上下文？"><a href="#为什么会有一个单独的压缩-流控制上下文？" class="headerlink" title="为什么会有一个单独的压缩/流控制上下文？"></a>为什么会有一个单独的压缩/流控制上下文？</h2><p>简单。<br>原来的提案中有流分组的概念，它会共享上下文和流控等。那样有利于代理 (也有利于使用它们的用户的体验)，而这样做相应也会增加一点复杂度。所以我们就决定先以一个简单的东西开头，看看它会带来多糟糕的问题，并且在未来的协议版本中解决这些问题（如果有的话）。</p>
<h2 id="在-HPACK-中为什么会有一个-EOS-符号？"><a href="#在-HPACK-中为什么会有一个-EOS-符号？" class="headerlink" title="在 HPACK 中为什么会有一个 EOS 符号？"></a>在 HPACK 中为什么会有一个 EOS 符号？</h2><p>考虑到 CPU 的效率和安全，HPACK 的哈夫曼编码填充了哈夫曼编码字符串到下一个字节边界。因此对于任何特定的字符串可能需要 0-7 个比特的填充。<br>如果单独考虑哈夫曼解码，任何比所需要的填充长的符号都可以正常工作。但是，HPACK 的设计允许按字节对比哈夫曼编码的字符串。通过填充 EOS 符号需要的比特，我们确保用户在做哈夫曼编码字符串字节级比较时是相等的。反过来许多头部可以在不需要哈夫曼解码的情况下被解析。</p>
<h2 id="我可以实现-HTTP-2-而不实现-HTTP-1-1-吗？"><a href="#我可以实现-HTTP-2-而不实现-HTTP-1-1-吗？" class="headerlink" title="我可以实现 HTTP/2 而不实现 HTTP/1.1 吗？"></a>我可以实现 HTTP/2 而不实现 HTTP/1.1 吗？</h2><p>基本上是可以的。<br>对于运行在 TLS (h2) 之上的 HTTP/2 而言，如果你没有实现 http1.1 的 ALPN 标识，那你就不需要支持任何 HTTP/1.1 特性。<br>对于运行在 TCP (h2c) 之上的 HTTP/2 而言，你需要实现最初的升级（Upgrade）请求。<br>只支持 h2c 的客户端将需要生成一个请求 “*” 的 OPTIONS 请求或者请求 “/” 的 HEAD 请求，它们绝对安全，并且也很容易构建。要实现 HTTP/2 的客户端将只需要把没有带上 101 状态码的 HTTP/1.1 响应看做是一个错误就行了。<br>只支持 h2c 的服务器可以使用一个固定的 101 响应来接收一个包含升级（Upgrade）消息头字段的请求。没有 h2c 的 Upgrade 令牌的请求可以使用一个包含了 Upgrade 消息头字段的 505（HTTP版本不支持）状态码来拒绝。那些不希望处理 HTTP/1.1 响应的服务器，应该在发送了带有鼓励用户升级到 HTTP/2 以重试的连接引导之后，立即用带有 REFUSED_STREAM 的错误码拒绝该请求的第一份数据流。</p>
<h2 id="5-3-2-节中的优先级示例不正确吗？"><a href="#5-3-2-节中的优先级示例不正确吗？" class="headerlink" title="5.3.2 节中的优先级示例不正确吗？"></a>5.3.2 节中的优先级示例不正确吗？</h2><p>不正确。流 B 的权重是 4，流 C 的权重是 12。为了判断每个流应分配的可用资源的比例，把各个权重加和（16），然后除各个流的权重。流 B 则分配四分之一的资源，流 C 分配四分之三的资源。因此，如标准中所言，理论上流 B 的资源是流 C 的三分之一。<br>我的 HTTP/2 的连接还需要 TCP_NODELAY 吗？</p>
<p>是的，可能需要。即使对于那种只需要使用单个连接下载大量数据的客户端实现，一些数据包仍然需要反向发回以达到最大的传送速度。没有 TCP_NODELAY（但仍然允许 Nagle 算法），要发出去的数据包可能会被阻塞一会儿，以达到与后续数据包合并的目的。<br>如果有这样一个数据包，它的目的是告诉对方仍有增加发送窗口的空间，延迟它的发送几百毫秒（或更多）将会对高速连接产生负面的影响。<br>部署问题</p>
<h2 id="我如何调试加密的-HTTP-2-？"><a href="#我如何调试加密的-HTTP-2-？" class="headerlink" title="我如何调试加密的 HTTP/2 ？"></a>我如何调试加密的 HTTP/2 ？</h2><p>用许多方式可以访问应用的数据，最简单的方法是使用 NSS keylogging 并配合 Wireshark 的插件（最近的基本开发版本）。这对 Firefox 和 Chrome 都有效。</p>
<h2 id="我如何使用-HTTP-2-的服务器推送？"><a href="#我如何使用-HTTP-2-的服务器推送？" class="headerlink" title="我如何使用 HTTP/2 的服务器推送？"></a>我如何使用 HTTP/2 的服务器推送？</h2><p>HTTP/2 的服务器推送允许在不等待客户端请求的情况下向客户端提供内容。这可以节省请求的时间开销，特别是对于大型高延迟带宽的产品，它的网络交互时间主要消耗在资源上。<br>基于请求的内容推送不同的资源可能是不合适的。当前，浏览器只有在发起一个匹配请求（参见 RFC 7234 第四部分）时才会使用推送的请求。<br>一些缓存并不对所有请求头都响应变化。即使被列在了 Vary 头中。为了最大限度地提高推送资源的利用率，最好避免内容协商。基于 accept-encoding 的内容协商广泛被缓存认可，但是其它头部则不太会被支持。</p>
<hr>
<p>转载自：<a href="http://www.zcfy.cc/article/1026，原作者：yanni4night。" target="_blank" rel="external">http://www.zcfy.cc/article/1026，原作者：yanni4night。</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/liujin101/wenjing.git/2017/09/23/20170923_07/" data-id="cj7xb1sdu0007ygqhsh9ddz3g" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-20170923_09" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/wenjing/2017/09/23/20170923_09/" class="article-date">
  <time datetime="2017-09-23T12:42:06.864Z" itemprop="datePublished">2017-09-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="转载一篇自己QQ空间的日志–2017年的第一天"><a href="#转载一篇自己QQ空间的日志–2017年的第一天" class="headerlink" title="转载一篇自己QQ空间的日志–2017年的第一天"></a>转载一篇自己QQ空间的日志–2017年的第一天</h1><p>2017/9/23 13:10:11 </p>
<hr>
<h3 id="很少写东西了，就拿以前的东西作为一个开头吧，希望自己后续能静下心来，沉淀自己。"><a href="#很少写东西了，就拿以前的东西作为一个开头吧，希望自己后续能静下心来，沉淀自己。" class="headerlink" title="很少写东西了，就拿以前的东西作为一个开头吧，希望自己后续能静下心来，沉淀自己。"></a>很少写东西了，就拿以前的东西作为一个开头吧，希望自己后续能静下心来，沉淀自己。</h3><hr>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;许久没有写过东西了，2017年的第一天，过得算是一塌糊涂，很有纪念意义，也是因为今天发生的几件小事打乱了自己原本的生活节奏。也是因为今晚注定无眠吧，索性也来体验一下许久未曾拾起的码字的乐趣。</p>
<hr>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;先来简单的说下过得一塌糊涂的今天吧。八点起床洗漱，吃早饭，出门买菜，回家看书，准备午饭的时候右手误伤左手大拇指。边吃午饭边看罗振宇昨晚的演讲会，觉得很有意思，于是打算睡个午觉起来接着看，睡完午觉起来的时候不知道是岔气还是别的原因胸口开始痛，稍微一吸气就越发的痛，也是应了祸不单行这句古语。然后把演讲看完，一个下午就过去了，用中午的鱼汤煮了七八个饺子，状态实在太差只好选择早早睡觉，还好睡着了，可惜此时又醒了，胸口还是痛，大拇指情况尚可，不影响打字。</p>
<hr>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;先声明一下，这篇日志不是2016年的年度总结，也不是2017年的开年计划。只是由于负伤+负伤+听了一场有意义的演讲，有些许感想，想分享给大家，仅此而已。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;负伤就不多说了， 常在菜板边，哪能不中刀。还是集中精力说下罗振宇这三个半小时的演讲吧。演讲的名字比较一般，时间的朋友，我只能记住时间两个字，全称还是刚刚才百度出来的。对于一场有意义的演讲来说，名字其实一点也不重要，因为靠名字来吸引人的事物往往是不靠谱的，或者说是华而不实的。</p>
<hr>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;演讲全程三个半小时，这是刨除了中场休息时间和广告时间的，除了纪录片性质的电影以外，应该比绝大多数的电影都长，甚至是有的电影的两倍时长。就只是一个人，指点江山，挥斥方遒，对2016年里发生的或大或小的事情发表着自己独特的见解，吸引着台下所有人的目光。这应该就是演讲的魅力所在吧，一个人站在空旷的舞台上，面对着成千上万的观众，用自己在时光里、岁月中沉淀下来的智慧去表达自己对于这个世界的思考。用平凡的措辞去引起观众心中的共鸣，点燃思想碰撞的火花，让思想的分享变得更加的直接、快捷。这样的感觉和体验是阅读书籍所无法带来的，当然我这里并不是在贬低书籍的意思。书籍承载的思想是需要大量的时间去消化和参悟的，绝非一朝一夕所能达到。而如今快节奏的生活给我们带来的是一颗越来越浮躁和焦虑的内心，我们要么是因为不知道自己想要什么所以焦虑，要么是因为知道想要什么却又暂时得不到所以浮躁。我们变得矛盾，一边跟别人吐槽说这是毒鸡汤，一边又忍不住偷偷喝两口。一边说着要剁手，一边又在结算着购物车。也是因为这些原因，演讲才变得更有商业价值，请注意，是变得更有商业价值而不是变得更有意义、更有作用。</p>
<hr>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我个人不是罗振宇的粉丝，平时也没有去关注过他的节目，今天能够听到他的演讲，也是一种幸运吧。三个半小时的演讲，我也不可能在此一一阐述自己的感想，就挑两个论点来说吧，也只是浅尝辄止，深究起来估计今晚就真的不用接着睡觉了。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第一个论点：“死磕，是不管自己怎么样，都要把事儿做好；自律，是让自己变得更好，事情自然就会好。”。当他说到这里的时候，我的心里就在想，像我这样的人算不算自律的呢？答案是：不是。我这样的人，充其量算是忙碌的人，因为对于未知的未来的恐惧而忙碌的人。 也许是因为潜意识里面对于未来的恐惧，当下的我总是会很焦虑，也不知道究竟在焦虑些什么，反正就是不能让自己空闲下来去胡思乱想，越是空闲就越是焦虑。这种情况其实很早就有了，应该是从高中开始的吧，那个时候因为严重的物理不及格和严重的打瞌睡。哎，往事不堪回首，还是言归正传吧。自律是我所向往的，但按照现在的状态来看还需要走过很长的一段路才能谈得上是在向自律的目标前行。</p>
<hr>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第二个论点：“共同体危机”。这里解释一下，指的是现在的人交流越来越少，即便是做着同样的事也没有共同的语言和志向，导致的结果就是危机来临时孤立无援，大家都幸灾乐祸。这里其实我是有疑异的，倒不是说不赞同这种说法，这本来就是现实的写照。我的疑异在于罗振宇对于这种危机的处理的解决方案，“道不同不相为谋”里面的道不仅仅是说我们是不是做着同样的事，更深层次里指的是我们的思想是否有共通之处，我们的成长轨迹、成长环境是否有相似之处，我们对待绝大部分事物的态度和观点是否有可取之处。在现在这个可以称得上是光怪陆离的社会，我们怎么可能再像从前一样因为我们做着同样的事情、啃着一样的面包而成为一个共同体呢？我们需要比从前更多的时间来检验对方是不是值得成为共同体，因为我们在没有成为共同体之前没有深层次交流的理由，也很少会有深层次交流的机会。我们用手机、QQ、微信去和已经成为共同体的那些人交流着，因为他们能够给我们带来安全感。</p>
<hr>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;好了，关于这场演讲就说这么多吧，推荐大家有时间的时候去听一遍全程，比看一部电影要有意义得多。</p>
<hr>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2016的总结就不打算写了，毕竟我是一个很懒的人，写了有损在懒人界的声誉，哈哈。2017年也暂时没有什么大的计划，希望自己在新的一年里能够通过不断的学习和反省，充实自己，过好每一天，缓解自己的浮躁和焦虑，能够更多的去追寻到内心的平静和愉悦。 也祝愿大家在新的一年里身体健康，工作顺利，阖家幸福。</p>
<hr>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一年到头也算是发了一个动态了，求点赞，哎，感觉好无耻。。。追剧去了，希望明天负伤的两处能有所改善。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/liujin101/wenjing.git/2017/09/23/20170923_09/" data-id="cj7xb1sdu0008ygqh6hpem3q5" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-20170923_06" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/wenjing/2017/09/23/20170923_06/" class="article-date">
  <time datetime="2017-09-23T12:42:06.849Z" itemprop="datePublished">2017-09-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="图解7种耦合关系"><a href="#图解7种耦合关系" class="headerlink" title="图解7种耦合关系"></a>图解7种耦合关系</h1><p>2017/9/23 9:49:10 </p>
<hr>
<p>之前组内同学问我耦合的关系，我没给对方讲清楚，今天借这个机会来深入讲讲模块之间的耦合关系这个事情。<br>本文将用图文详细讲解七种耦合的不同之处。<br>高内聚与低耦合<br><img src="http://owo3ei6dn.bkt.clouddn.com/image/20170923/416.png"><br>高内聚与低耦合是每个软件开发者追求的目标，那么内聚和耦合分别是什么意思呢？</p>
<p>内聚是从功能角度来度量模块内的联系，一个好的内聚模块应当恰好做一件事。它描述的是模块内的功能联系。<br>耦合是软件结构中各模块之间相互连接的一种度量，耦合强弱取决于模块间接口的复杂程度、进入或访问一个模块的点以及通过接口的数据。<br>耦合</p>
<p>不同模块之间的关系就是耦合，根据耦合程度可以分为7种，耦合度依次变低。<br>内容耦合<br>公共耦合<br>外部耦合<br>控制耦合<br>标记耦合<br>数据耦合<br>非直接耦合<br>下面我们来说说每种耦合是什么，开始之前先来说下要实现的功能。m1和m2是两个独立的模块，其中m2种会显示m1的输入，m1会显示m2的输入。<br><img src="http://owo3ei6dn.bkt.clouddn.com/image/20170923/417.png"><br>很显然，m1和m2两个模块之间会有一些联系（耦合），你也可以想想如何实现这个功能，下面用7种不同的方式来实现这个功能。<br>注：项目的代码我放到了<a href="https://github.com/yanhaijing/coupling，项目的demo，可以在这里查看http://yanhaijing.com/coupling/。">https://github.com/yanhaijing/coupling，项目的demo，可以在这里查看http://yanhaijing.com/coupling/。</a></p>
<h2 id="内容耦合"><a href="#内容耦合" class="headerlink" title="内容耦合"></a>内容耦合</h2><p>内容耦合是最紧的耦合程度，一个模块直接访问另一模块的内容，则称这两个模块为内容耦合。<br><img src="http://owo3ei6dn.bkt.clouddn.com/image/20170923/418.png"><br>为了实现功能，我们将m1的输入放到m2.m1input上，将m2的输入放到m1.m2input上。<br>// m1.jsroot.m2.m1input = this.value;m2.update();// m2.jsroot.m1.m2input = this.value;m1.update();<br>PS:不知道谁会这么写代码，除了我为了做演示之外。。。</p>
<h2 id="公共耦合"><a href="#公共耦合" class="headerlink" title="公共耦合"></a>公共耦合</h2><p>一组模块都访问同一个全局数据结构，则称之为公共耦合。<br><img src="http://owo3ei6dn.bkt.clouddn.com/image/20170923/419.png"><br>在这种case中，m1和m2将自己的输入放到全局的data上。<br>// m1.jsroot.data.m1input = this.value;m2.update();// m2.jsroot.data.m2input = this.value;m1.update();</p>
<h2 id="外部耦合"><a href="#外部耦合" class="headerlink" title="外部耦合"></a>外部耦合</h2><p>一组模块都访问同一全局简单变量，而且不通过参数表传递该全局变量的信息，则称之为外部耦合。外部耦合和公共耦合很像，区别就是一个是简单变量，一个是复杂数据结构。<br><img src="http://owo3ei6dn.bkt.clouddn.com/image/20170923/420.png"><br>在这种case中，m1和m2都将自己的输入放到全局上。<br>// m1.jsroot.m1input = this.value;m2.update();// m2.jsroot.m2input = this.value;m1.update();</p>
<h2 id="控制耦合"><a href="#控制耦合" class="headerlink" title="控制耦合"></a>控制耦合</h2><p>模块之间传递的不是数据信息，而是控制信息例如标志、开关量等，一个模块控制了另一个模块的功能。<br>从控制耦合开始，模块的数据就放在自己内部了，不同模块之间通过接口互相调用。<br><img src="http://owo3ei6dn.bkt.clouddn.com/image/20170923/421.png"><br>在这个case中，得增加一个需求，就是当m1的输入为空时，隐藏m2的显示信息。<br>// m1.jsroot.m1input = this.value;m2.update();m2.toggle(!!this.value); // 传递flag<br>上面的代码中m1直接控制了m2的显示和隐藏。</p>
<h2 id="标记耦合"><a href="#标记耦合" class="headerlink" title="标记耦合"></a>标记耦合</h2><p>调用模块和被调用模块之间传递数据结构而不是简单数据，同时也称作特征耦合。<br><img src="http://owo3ei6dn.bkt.clouddn.com/image/20170923/422.png"><br>在这个case中，m1传给m2的是一个对象。<br>// m1.jsme.m1input = this.value;m2.update(me); // 传递引用// m2.jsme.m2input = this.value;m1.update(me);</p>
<h2 id="数据耦合"><a href="#数据耦合" class="headerlink" title="数据耦合"></a>数据耦合</h2><p>调用模块和被调用模块之间只传递简单的数据项参数。相当于高级语言中的值传递。<br><img src="http://owo3ei6dn.bkt.clouddn.com/image/20170923/423.png"><br>在这个case中，m1传给m2的是一个简单数据结构。<br>// m1.jsme.m1input = this.value;m2.update(me.m1input); // 传递值// m2.jsme.m2input = this.value;m1.update(me.m2input);</p>
<h2 id="非直接耦合"><a href="#非直接耦合" class="headerlink" title="非直接耦合"></a>非直接耦合</h2><p>两个模块之间没有直接关系，它们之间的联系完全是通过主模块的控制和调用来实现的。耦合度最弱，模块独立性最强。<br>子模块无需知道对方的存在，子模块之间的联系，全部变成子模块和主模块之间的联系。<br><img src="http://owo3ei6dn.bkt.clouddn.com/image/20170923/424.png"><br>在这个case种，增加一个index.js作为主模块。<br>// index.jsvar m1 = root.m1;var m2 = root.m2;m1.init(function (str) {    m2.update(str);});m2.init(function (str) {    m1.update(str);});// m1.jsme.m1input = this.value;inputcb(me.m1input); // inputcb是回调函数// m2.jsme.m2input = this.value;inputcb(me.m2input);<br>内聚</p>
<p>其实关于内聚也分为很多种，如下所示，如果你感兴趣可以自己研究研究，我们下次再来分享内聚的问题。<br>偶然内聚<br>逻辑内聚<br>时间内聚<br>通信内聚<br>顺序内聚<br>功能内聚<br>总结</p>
<p>希望你看完上面的文章，搞懂了耦合的种类，也希望你以后能使用非直接耦合这种方式来写代码，祝好。</p>
<hr>
<p>转载自：<a href="http://yanhaijing.com/program/2016/09/01/about-coupling/，原作者：颜海镜。" target="_blank" rel="external">http://yanhaijing.com/program/2016/09/01/about-coupling/，原作者：颜海镜。</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/liujin101/wenjing.git/2017/09/23/20170923_06/" data-id="cj7xb1sdu0006ygqh8gizvf41" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/wenjing/2017/09/23/hello-world/" class="article-date">
  <time datetime="2017-09-23T11:22:02.382Z" itemprop="datePublished">2017-09-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/wenjing/2017/09/23/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/liujin101/wenjing.git/2017/09/23/hello-world/" data-id="cj7x9vylc0000xcqh5pjzwncj" class="article-share-link">Partager</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/wenjing/archives/2017/09/">September 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/wenjing/2017/09/23/20170923_04/">(no title)</a>
          </li>
        
          <li>
            <a href="/wenjing/2017/09/23/20170923_05/">(no title)</a>
          </li>
        
          <li>
            <a href="/wenjing/2017/09/23/20170923_01/">(no title)</a>
          </li>
        
          <li>
            <a href="/wenjing/2017/09/23/20170923_02/">(no title)</a>
          </li>
        
          <li>
            <a href="/wenjing/2017/09/23/20170923_03/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 文井<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/wenjing/" class="mobile-nav-link">Home</a>
  
    <a href="/wenjing/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/wenjing/fancybox/jquery.fancybox.css">
  <script src="/wenjing/fancybox/jquery.fancybox.pack.js"></script>


<script src="/wenjing/js/script.js"></script>

  </div>
</body>
</html>